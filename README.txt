Setup:

Step1: Download and install Python from Python.org

step 2: open cmd prompt: pip install pandas json psycopg2 matplotlib

Step3: create account in https://supabase.com/dashboard/sign-up for database craetion
	- create new project
	- create password

Step4: create weatherbit account using URL: https://www.weatherbit.io/account/create
	

How to run the data pipeline:

- download assignment.ipynb and place it in local folder
- open the assignment in VSCode and execute it

Data transformation steps:
- extracting the location information for each store to fetch the weather data
- categorize weather data into bins
- make temperature and rain ranges for analysis whether based on sales
- calculate the average sales amount per rain condition
- calculate the avgerage sales_amouny per temperature condition

Data Aggregation:
below aggregation has been performed on the dataset.
- Calculate total sales amount per customer.
- Determine the average order quantity per product.
- Identify the top-selling products or customers.
- Analyze sales trends over time (e.g., monthly or quarterly sales).
- Include any other aggregations or data manipulations that you think are relevant.
- Include weather data in the analysis (e.g., average sales amount per weather condition).

Database schema:

create table
  public.sales_data (
    order_id bigint null,
    customer_id bigint null,
    product_id bigint null,
    quantity bigint null,
    price double precision null,
    order_date text null,
    name text null,
    username text null,
    email text null,
    address jsonb null,
    clouds double precision null,
    datetime text null,
    dewpt double precision null,
    dhi double precision null,
    dni double precision null,
    ghi double precision null,
    max_dhi double precision null,
    max_dni double precision null,
    max_ghi double precision null,
    max_temp double precision null,
    max_temp_ts double precision null,
    max_uv double precision null,
    max_wind_dir double precision null,
    max_wind_spd double precision null,
    max_wind_spd_ts double precision null,
    min_temp double precision null,
    min_temp_ts double precision null,
    precip double precision null,
    precip_gpm double precision null,
    pres double precision null,
    revision_status text null,
    rh double precision null,
    slp double precision null,
    snow double precision null,
    snow_depth double precision null,
    solar_rad double precision null,
    t_dhi double precision null,
    t_dni double precision null,
    t_ghi double precision null,
    t_solar_rad double precision null,
    temp double precision null,
    ts double precision null,
    wind_dir double precision null,
    wind_gust_spd double precision null,
    wind_spd double precision null
  ) tablespace pg_default;


  create table
  public.product_sales_avg (
    product_id bigint not null,
    quantity double precision not null
  ) tablespace pg_default;


  create table
  public.sales_per_cust (
    customer_id bigint generated by default as identity,
    order_count bigint not null
  ) tablespace pg_default;

create table
  public.average_sales_rain_based (
    precip_bin text not null,
    sale_count bigint not null
  ) tablespace pg_default;

create table
  public.average_sales_temp_based (
    temp_bin text not null,
    sale_count bigint not null
  ) tablespace pg_default;

create table
  public.monthly_sales (
    order_date date not null,
    monthly_sales_quantity bigint not null
  ) tablespace pg_default;


create table
  public.quarterly_sales (
    order_date date not null,
    quarterly_sales_quantity bigint not null
  ) tablespace pg_default;

create view top_selling_product as (select product_id,sum(quantity) as top_selling_product from sales_data group by product_id);